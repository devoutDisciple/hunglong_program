<view class="wrap">
    <header />
    <scroll-view scroll-y="{{true}}" bindscroll="onPageScroll" class="content" enhanced="{{true}}" show-scrollbar="{{false}}">
        <!-- 模块 -->
        <view class="icon_list">
            <view class="icon_chunk" wx:for="{{plateList}}" wx:key="id">
                <view class="icon_chunk_img">
                    <image src="{{item.url}}" />
                </view>
                <view class="icon_chunk_txt">
                    {{item.name}}
                </view>
            </view>
        </view>
        <!-- tab -->
        <view class=" {{fixed ? 'top_fixed' : ''}}" style="{{'top: '+ headerHight}}">
            <view class="tab">
                <view class="tab_con">
                    <van-tabs active="{{ activeTab }}" bind:change="onChangeCircle" ellipsis="{{false}}">
                        <block wx:key="id" wx:for="{{circleList}}" >
                            <van-tab title="{{item.name}}"/>
                        </block>
                    </van-tabs>
                </view>
                <view class="tab_add" bindtap = "onSelectCicle">
                    <image src="/asserts/public/tabAdd.png" />
                </view>
            </view>
            <!-- 话题 -->
            <view wx:if="{{topicList && topicList.length !== 0}}" class="topic {{topicClass}}">
            <view class="topic_con">
                    <block wx:key="id" wx:for="{{topicList}}" >
                        <view 
                            class="topic_item {{activeTopicId === item.id ? 'topic_active_item' : ''}}" 
                            bindtap="onChangeTopic" 
                            data-topic_id="{{item.id}}">
                            {{item.name}}
                        </view>
                    </block>
            </view>
            <view class="topic_icon" bindtap="cntOpen">
                    <image wx:if="{{topicClass !== 'topic_open'}}" src="/asserts/public/arrow_top.png" />
                    <image wx:else src="/asserts/public/arrow_btm.png" />
            </view>
            </view>
        </view>
        <block wx:if="{{dataList && dataList.length !== 0}}">
            <block wx:for="{{dataList}}" wx:key="id">
                <home-post wx:if="{{item.type === 'posts'}}" detail="{{item}}"/>
                <home-post wx:if="{{item.type === 'blogs'}}" detail="{{item}}"/>
                <home-vote wx:if="{{item.type === 'vote'}}" detail="{{item}}" />
                <home-battle wx:if="{{item.type === 'battle'}}" detail="{{item}}" />
            </block>
        </block>
        <block wx:else>
            <view class="empty">
                <image src="/asserts/public/empty.png"/>
            </view>
        </block>
        
    </scroll-view>
    <publish bindOnTap="onPublish"/>
</view>